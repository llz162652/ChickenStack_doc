"""
ğŸ” ChickenStack - åŸºäºæ ˆçš„å›¾çµå®Œå¤‡ç¼–ç¨‹è¯­è¨€
================================================

ChickenStack æ˜¯ä¸€ç§å— Brainfuck å¯å‘ã€ä½†æ›´äººç±»å‹å¥½çš„å›¾çµå®Œå¤‡ç¼–ç¨‹è¯­è¨€ã€‚
å®ƒåŸºäº "æ ˆ (Stack)" å’Œ "é€†æ³¢å…°è¡¨è¾¾å¼ (RPN)" è®¾è®¡ï¼Œé¿å…äº† Brainfuck ä¸­ç—›è‹¦çš„æŒ‡é’ˆç§»åŠ¨ã€‚

## æ ¸å¿ƒè®¾è®¡åŸç†

1. **åŸºäºæ ˆçš„è®¡ç®—æ¨¡å‹**
   - æ‰€æœ‰æ•°æ®æ“ä½œéƒ½åœ¨æ ˆä¸Šè¿›è¡Œ
   - é‡‡ç”¨åç¼€è¡¨è¾¾å¼ (Reverse Polish Notation)
   - ä¾‹å¦‚ï¼šè®¡ç®— 5 + 3 å†™ä½œ "5 3 +"ï¼ˆå…ˆå…¥æ ˆ5ï¼Œå†å…¥æ ˆ3ï¼Œæœ€åæ‰§è¡ŒåŠ æ³•ï¼‰

2. **å›¾çµå®Œå¤‡æ€§**
   - æ”¯æŒåŸºæœ¬çš„æ•°å­¦è¿ç®— (+, -, *, /, %)
   - æ”¯æŒæ ˆæ“ä½œ (å¤åˆ¶ã€äº¤æ¢ã€ä¸¢å¼ƒ)
   - æ”¯æŒé€»è¾‘åˆ¤æ–­ (=, >)
   - æ”¯æŒå¾ªç¯æ§åˆ¶ ([, ])
   - æ”¯æŒè¾“å…¥è¾“å‡º (., ", ,, ?)

3. **äººç±»å¯è¯»æ€§**
   - ä½¿ç”¨ç›´è§‚çš„ç¬¦å·è€Œéæ™¦æ¶©çš„æ“ä½œç¬¦
   - æ•°å­—ç›´æ¥è¡¨ç¤ºï¼ˆå¦‚ "10" è€Œé "++++++++++"ï¼‰
   - é€»è¾‘æ¸…æ™°ï¼Œæ˜“äºç†è§£å’Œè°ƒè¯•

## è¯­è¨€ç‰¹æ€§å¯¹æ¯”

### Brainfuck vs ChickenStack

è®¡ç®— 5 + 3:
- Brainfuck: +++++>+++[<+>-]<. (éœ€è¦æ•° + å·ï¼Œç§»åŠ¨æŒ‡é’ˆ)
- ChickenStack: 5 3 + . (ç›´æ¥ã€ç›´è§‚)

æ‰“å° "HELLO":
- Brainfuck: éœ€è¦å¤§é‡ + å’Œ > æ“ä½œç¬¦ï¼Œéš¾ä»¥é˜…è¯»
- ChickenStack: 72 " 69 " 76 " 76 " 79 " (ç›´æ¥ä½¿ç”¨ ASCII ç )

## æŒ‡ä»¤é›†

### æ•°æ® (Data)
- 0-9: è¾“å…¥å¤šä½æ•°å­—ï¼ˆå¦‚ "1 0" è¡¨ç¤º 10ï¼‰
- ç©ºæ ¼: åˆ†éš”ç¬¦ï¼Œç”¨äºåˆ†éš”æ•°å­—å’Œç¬¦å·

### æ•°å­¦è¿ç®— (Math)
- +: åŠ æ³•ï¼ˆå–æ ˆé¡¶ä¸¤ä¸ªæ•°ç›¸åŠ ï¼‰
- -: å‡æ³•
- *: ä¹˜æ³•
- /: é™¤æ³•
- %: å–ä½™æ•°

### æ ˆæ“ä½œ (Stack Ops)
- :: å¤åˆ¶æ ˆé¡¶ (Duplicate) -> 5 : å˜æˆ 5 5
- \: äº¤æ¢æ ˆé¡¶ (Swap) -> 1 2 \ å˜æˆ 2 1
- $: ä¸¢å¼ƒæ ˆé¡¶ (Pop)

### è¾“å…¥è¾“å‡º (I/O)
- .: æ‰“å°æ•°å­—ï¼ˆå¦‚ 65 . è¾“å‡º 65ï¼‰
- ": æ‰“å°å­—ç¬¦ï¼ˆå¦‚ 65 " è¾“å‡º Aï¼‰
- ,: è¾“å…¥æ•°å­—
- ?: è¾“å…¥å­—ç¬¦

### é€»è¾‘æ§åˆ¶ (Logic)
- [: å¾ªç¯å¼€å§‹ï¼ˆå¦‚æœæ ˆé¡¶æ˜¯ 0ï¼Œè·³åˆ° ]ï¼‰
- ]: å¾ªç¯ç»“æŸï¼ˆè·³å› [ï¼‰
- =: åˆ¤æ–­ç›¸ç­‰ï¼ˆç›¸ç­‰æ¨å…¥ 1ï¼Œä¸ç­‰æ¨å…¥ 0ï¼‰
- >: åˆ¤æ–­å¤§äº

## æ¨¡å—ç»“æ„

æœ¬æ¨¡å—å¯¼å‡ºä¸‰ä¸ªæ ¸å¿ƒç±»ï¼š

1. **ChickenStackVM** (vm.py)
   - è™šæ‹Ÿæœºæ ¸å¿ƒï¼Œè´Ÿè´£æ‰§è¡Œæ‰€æœ‰æŒ‡ä»¤
   - ç»´æŠ¤æ•°æ®æ ˆå’Œå¾ªç¯è·³è½¬è¡¨
   - å®ç°æ‰€æœ‰æ“ä½œæ–¹æ³•ï¼ˆæ•°å­¦ã€æ ˆæ“ä½œã€é€»è¾‘ã€I/Oï¼‰

2. **Parser** (parser.py)
   - ä»£ç è§£æå™¨ï¼Œè´Ÿè´£å°†æºä»£ç è½¬æ¢ä¸º Token åˆ—è¡¨
   - æ„å»ºå¾ªç¯ç¬¦å·çš„è·³è½¬è¡¨
   - å¤„ç†å¾ªç¯ç¬¦å·åŒ¹é…é”™è¯¯

3. **IOHandler** (io_handler.py)
   - è¾“å…¥è¾“å‡ºå¤„ç†å™¨
   - æ”¯æŒæ— ç¼“å†²çš„é”®ç›˜è¾“å…¥
   - è·¨å¹³å°å…¼å®¹ï¼ˆWindows å’Œé Windows ç³»ç»Ÿï¼‰

## ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬æ•°å­¦è¿ç®—

```python
from chicken_stack import ChickenStackVM, Parser, IOHandler

# åˆ›å»ºè§£é‡Šå™¨ç»„ä»¶
vm = ChickenStackVM()
parser = Parser()
io_handler = IOHandler()

# è§£æä»£ç 
tokens = parser.parse("10 20 + 2 * .")
vm.loops = parser.get_loop_table()
vm.io_handler = io_handler

# æ‰§è¡Œä»£ç 
for token in tokens:
    if isinstance(token, int):
        vm.push(token)
    elif token == '+':
        vm.op_add()
    elif token == '*':
        vm.op_mul()
    elif token == '.':
        vm.op_print_num()

# è¾“å‡º: 60
```

### å¾ªç¯ç¤ºä¾‹

```python
# ä» 5 å€’æ•°åˆ° 1
code = "5 [ : . 1 - ]"
# æ‰§è¡Œè¿‡ç¨‹ï¼š
# 1. å…¥æ ˆ 5
# 2. [ æ£€æŸ¥æ ˆé¡¶ 5 != 0ï¼Œè¿›å…¥å¾ªç¯
# 3. : å¤åˆ¶æ ˆé¡¶ -> æ ˆ: 5 5
# 4. . æ‰“å°æ ˆé¡¶ 5
# 5. 1 å…¥æ ˆ -> æ ˆ: 5 1
# 6. - 5-1=4 -> æ ˆ: 4
# 7. ] è·³å› [
# é‡å¤...ç›´åˆ°æ ˆé¡¶ä¸º 0
```

## ç‰ˆæœ¬å†å²

- v1.0.0: åˆå§‹ç‰ˆæœ¬ï¼Œå®ç°æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½

## å‚è€ƒèµ„æº

- Brainfuck: https://en.wikipedia.org/wiki/Brainfuck
- é€†æ³¢å…°è¡¨è¾¾å¼: https://en.wikipedia.org/wiki/Reverse_Polish_notation
- æ ˆæ•°æ®ç»“æ„: https://en.wikipedia.org/wiki/Stack_(abstract_data_type)
"""

from .vm import ChickenStackVM
from .parser import Parser, Token, TokenType
from .io_handler import IOHandler

__version__ = "1.0.0"
__all__ = ["ChickenStackVM", "Parser", "IOHandler", "Token", "TokenType"]